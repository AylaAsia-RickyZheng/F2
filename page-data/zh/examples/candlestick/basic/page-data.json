{"componentChunkName":"component---node-modules-antv-gatsby-theme-antv-site-templates-example-tsx","path":"/zh/examples/candlestick/basic","result":{"data":{"site":{"siteMetadata":{"title":"F2","githubUrl":"https://github.com/antvis/f2","examples":[{"slug":"gallery","icon":"gallery","title":{"zh":"Gallery","en":"Gallery"}},{"slug":"line","icon":"line","title":{"zh":"折线图","en":"Line Charts"}},{"slug":"area","icon":"area","title":{"zh":"面积图","en":"Area Charts"}},{"slug":"column","icon":"column","title":{"zh":"柱状图","en":"Column Charts"}},{"slug":"bar","icon":"bar","title":{"zh":"条形图","en":"Bar Charts"}},{"slug":"pie","icon":"pie","title":{"zh":"饼图","en":"Pie Charts"}},{"slug":"radar","icon":"radar","title":{"zh":"雷达图","en":"Radar Charts"}},{"slug":"point","icon":"point","title":{"zh":"点图","en":"Point Charts"}},{"slug":"funnel","icon":"funnel","title":{"zh":"漏斗图","en":"Funnel Charts"}},{"slug":"candlestick","icon":"candlestick","title":{"zh":"蜡烛图","en":"Candlestick Charts"}},{"slug":"relation","icon":"relation","title":{"zh":"关系图","en":"Relation Charts"}},{"slug":"heatmap","icon":"heatmap","title":{"zh":"热力图","en":"Heatmap Charts"}},{"slug":"component","icon":"component","title":{"zh":"功能组件","en":"Chart Components"}},{"slug":"other","icon":"other","title":{"zh":"其他图表","en":"Other Chart"}}],"playground":{"container":"\n        <div class=\"mobile-container\">\n          <div class=\"mobile-header\"></div>\n          <div class=\"mobile-content\">\n            <canvas id=\"container\"/>\n          </div>\n        </div>\n      ","playgroundDidMount":"window.initPlayground()","playgroundWillUnmount":null,"dependencies":null,"htmlCodeTemplate":null}},"pathPrefix":""},"allMarkdownRemark":{"edges":[{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/relation/relation"},"frontmatter":{"title":"treemap","order":0,"icon":"relation"},"parent":{"__typename":"File","relativePath":"relation/relation/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/relation/relation"},"frontmatter":{"title":"矩形式树图","order":0,"icon":"relation"},"parent":{"__typename":"File","relativePath":"relation/relation/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/radar/radar"},"frontmatter":{"title":"Basic Radar Chart","order":0,"icon":"radar"},"parent":{"__typename":"File","relativePath":"radar/radar/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/radar/radar"},"frontmatter":{"title":"Basic Radar Chart","order":0,"icon":"radar"},"parent":{"__typename":"File","relativePath":"radar/radar/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/point/scatter"},"frontmatter":{"title":"点图","order":0,"icon":"point"},"parent":{"__typename":"File","relativePath":"point/scatter/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/point/scatter"},"frontmatter":{"title":"Point Chart","order":0,"icon":"point"},"parent":{"__typename":"File","relativePath":"point/scatter/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/pie/basic"},"frontmatter":{"title":"Basic Pie Chart","order":0,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/pie/basic"},"frontmatter":{"title":"基础饼图","order":0,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/other/other"},"frontmatter":{"title":"Other Chart","order":0,"icon":"other"},"parent":{"__typename":"File","relativePath":"other/other/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/other/other"},"frontmatter":{"title":"词云图","order":0,"icon":"other"},"parent":{"__typename":"File","relativePath":"other/other/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/line/basic"},"frontmatter":{"title":"Basic Line Chart","order":0,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/line/basic"},"frontmatter":{"title":"基础折线图","order":0,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/heatmap/heatmap"},"frontmatter":{"title":"Heatmap Chart","order":0,"icon":"heatmap"},"parent":{"__typename":"File","relativePath":"heatmap/heatmap/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/heatmap/heatmap"},"frontmatter":{"title":"热力图","order":0,"icon":"heatmap"},"parent":{"__typename":"File","relativePath":"heatmap/heatmap/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/gallery/gauge"},"frontmatter":{"title":"Gauge","order":0,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/gauge/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/gallery/gauge"},"frontmatter":{"title":"半圆进度条","order":0,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/gauge/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/funnel/pyramid"},"frontmatter":{"title":"Pyramid Chart","order":0,"icon":"Funnel"},"parent":{"__typename":"File","relativePath":"funnel/pyramid/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/funnel/pyramid"},"frontmatter":{"title":"金字塔图","order":0,"icon":"funnel"},"parent":{"__typename":"File","relativePath":"funnel/pyramid/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/funnel/basic"},"frontmatter":{"title":"Basic Funnel Chart","order":0,"icon":"Funnel"},"parent":{"__typename":"File","relativePath":"funnel/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/funnel/basic"},"frontmatter":{"title":"基础漏斗图","order":0,"icon":"funnel"},"parent":{"__typename":"File","relativePath":"funnel/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/component/tooltip"},"frontmatter":{"title":"Tooltip","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/tooltip/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/component/legend"},"frontmatter":{"title":"Legend","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/legend/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/component/tooltip"},"frontmatter":{"title":"Tooltip","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/tooltip/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/component/legend"},"frontmatter":{"title":"图例","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/legend/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/component/guide"},"frontmatter":{"title":"Guide","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/guide/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/component/image"},"frontmatter":{"title":"Image","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/image/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/component/guide"},"frontmatter":{"title":"Guide","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/guide/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/component/image"},"frontmatter":{"title":"Image","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/image/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/component/axis"},"frontmatter":{"title":"坐标轴","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/axis/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/component/axis"},"frontmatter":{"title":"Axis","order":0,"icon":"component"},"parent":{"__typename":"File","relativePath":"component/axis/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/column/basic"},"frontmatter":{"title":"Basic Column Chart","order":0,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/column/basic"},"frontmatter":{"title":"基础柱状图","order":0,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/candlestick/basic"},"frontmatter":{"title":"蜡烛图","order":0,"icon":"candlestick"},"parent":{"__typename":"File","relativePath":"candlestick/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/candlestick/basic"},"frontmatter":{"title":"K Chart","order":0,"icon":"candlestick"},"parent":{"__typename":"File","relativePath":"candlestick/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/basic"},"frontmatter":{"title":"Basic Demo","order":0,"icon":"column"},"parent":{"__typename":"File","relativePath":"basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/basic"},"frontmatter":{"title":"基础演示","order":0,"icon":"column"},"parent":{"__typename":"File","relativePath":"basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/bar/basic"},"frontmatter":{"title":"Basic Bar Chart","order":0,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/bar/basic"},"frontmatter":{"title":"基础条状图","order":0,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/area/basic"},"frontmatter":{"title":"Basic Area Chart","order":0,"icon":"area"},"parent":{"__typename":"File","relativePath":"area/basic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/area/basic"},"frontmatter":{"title":"基础面积图","order":0,"icon":"area"},"parent":{"__typename":"File","relativePath":"area/basic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/pie/donut"},"frontmatter":{"title":"Donut Chart","order":1,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/donut/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/pie/donut"},"frontmatter":{"title":"环形图","order":1,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/donut/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/line/multiple"},"frontmatter":{"title":"Compare Line Chart","order":1,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/multiple/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/line/multiple"},"frontmatter":{"title":"对比折线图","order":1,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/multiple/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/gallery/forecast"},"frontmatter":{"title":"预测线","order":1,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/forecast/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/gallery/forecast"},"frontmatter":{"title":"预测线","order":1,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/forecast/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/column/dodge"},"frontmatter":{"title":"分组柱状图","order":1,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/dodge/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/column/dodge"},"frontmatter":{"title":"Dodge Column Chart","order":1,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/dodge/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/bar/stack"},"frontmatter":{"title":"Stack Bar Chart","order":1,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/stack/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/bar/dodge"},"frontmatter":{"title":"Dodge Bar Chart","order":1,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/dodge/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/area/stacked"},"frontmatter":{"title":"层叠面积图","order":1,"icon":"area"},"parent":{"__typename":"File","relativePath":"area/stacked/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/bar/dodge"},"frontmatter":{"title":"分组条状图","order":1,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/dodge/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/area/stacked"},"frontmatter":{"title":"Stacked Area Chart","order":1,"icon":"area"},"parent":{"__typename":"File","relativePath":"area/stacked/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/pie/rose"},"frontmatter":{"title":"南丁格尔玫瑰图","order":2,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/rose/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/pie/rose"},"frontmatter":{"title":"Nightingale Rose Chart","order":2,"icon":"pie"},"parent":{"__typename":"File","relativePath":"pie/rose/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/line/dynamic"},"frontmatter":{"title":"Dynamic Line Chart","order":2,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/dynamic/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/line/dynamic"},"frontmatter":{"title":"动态折线图","order":2,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/dynamic/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/gallery/steps-record"},"frontmatter":{"title":"健康步数","order":2,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/steps-record/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/gallery/steps-record"},"frontmatter":{"title":"健康步数","order":2,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/steps-record/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/column/stack"},"frontmatter":{"title":"Stack Column Chart","order":2,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/stack/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/column/stack"},"frontmatter":{"title":"层叠柱状图","order":2,"icon":"column"},"parent":{"__typename":"File","relativePath":"column/stack/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/bar/stack"},"frontmatter":{"title":"层叠柱状图","order":2,"icon":"bar"},"parent":{"__typename":"File","relativePath":"bar/stack/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/line/other"},"frontmatter":{"title":"Other","order":3,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/other/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/line/other"},"frontmatter":{"title":"其他","order":3,"icon":"line"},"parent":{"__typename":"File","relativePath":"line/other/index.zh.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/en/examples/gallery/fitness-ring"},"frontmatter":{"title":"Apple Watch","order":3,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/fitness-ring/index.en.md"}}},{"node":{"htmlAst":{"type":"root","children":[],"data":{"quirksMode":false}},"fields":{"slug":"/zh/examples/gallery/fitness-ring"},"frontmatter":{"title":"Apple Watch 健身记录","order":3,"icon":"gallery"},"parent":{"__typename":"File","relativePath":"gallery/fitness-ring/index.zh.md"}}}]}},"pageContext":{"exampleSections":{"examples":[{"relativePath":"candlestick/basic/demo/basic.js","absolutePath":"/Users/yue/gitlab/antvis/f2/examples/candlestick/basic/demo/basic.js","order":0,"filename":"basic.js","title":"蜡烛图","screenshot":"https://gw.alipayobjects.com/zos/rmsportal/ClNOWARMKZlTAOPeZBsy.png","source":"import F2 from '@antv/f2';\n\nfetch('../data/candle-sticks.json')\n  .then(res => res.json())\n  .then(data => {\n    data = data.slice(0, 150); // 截取数据，只展示 200 条\n    const BASIC_PRICE = 6.95;\n    // 数据处理，按照时间排序\n    data.sort(function(obj1, obj2) {\n      return obj1.time > obj2.time ? 1 : -1;\n    });\n    data.forEach(function(obj) {\n      obj.range = [ obj.start, obj.end, obj.max, obj.min ];\n      obj.trend = obj.start <= obj.end ? 0 : 1;\n    });\n    const chart = new F2.Chart({\n      id: 'container',\n      pixelRatio: window.devicePixelRatio\n    });\n\n    chart.source(data, {\n      range: {\n        tickCount: 5,\n        formatter: function formatter(val) {\n          return val.toFixed(2);\n        }\n      },\n      time: {\n        tickCount: 3\n      }\n    });\n    chart.tooltip({\n      showCrosshairs: true,\n      showXTip: true,\n      showYTip: true,\n      crosshairsType: 'xy',\n      custom: true,\n      yTip: function yTip(val) {\n        return {\n          text: val.toFixed(2),\n          fill: '#333',\n          fontSize: 10\n        };\n      },\n\n      xTip: {\n        fill: '#333',\n        fontSize: 10\n      },\n      xTipBackground: {\n        fill: '#EDF2FE'\n      },\n      yTipBackground: {\n        fill: '#EDF2FE'\n      },\n      crosshairsStyle: {\n        stroke: '#0F8DE8'\n      },\n      onChange: function onChange(obj) {\n        const data = obj.items[0].origin;\n        $('#tooltip .item-value').each(function(index, ele) {\n          const type = $(ele).data('type');\n          const value = data[type];\n          let color;\n          if (type === 'time') {\n            color = '#000000';\n          } else {\n            color = data.trend === 0 ? '#F4333C' : '#1CA93D';\n          }\n          $(ele).css({\n            color\n          });\n          $(ele).text(value);\n        });\n        $('#tooltip').css('visibility', 'visible');\n      },\n      onHide: function onHide() {\n        $('#tooltip').css('visibility', 'hidden');\n      }\n    });\n    chart.axis('range', {\n      grid: {\n        stroke: '#ddd',\n        lineWidth: 1,\n        lineDash: null\n      },\n      label: {\n        fill: '#999'\n      }\n    });\n    chart.axis('time', {\n      label: function label(text, index, total) {\n        const textCfg = {\n          fill: '#999'\n        };\n        if (index === 0) {\n          textCfg.textAlign = 'left';\n        }\n        if (index === total - 1) {\n          textCfg.textAlign = 'right';\n        }\n        return textCfg;\n      },\n\n      grid: {\n        lineWidth: 1,\n        stroke: '#ddd'\n      }\n    });\n    chart.guide().line({\n      start: [ 'min', BASIC_PRICE ],\n      end: [ 'max', BASIC_PRICE ],\n      style: {\n        lineDash: [ 8 ],\n        stroke: '#F68300'\n      }\n    });\n    chart.guide().text({\n      position: [ 'min', BASIC_PRICE ],\n      content: BASIC_PRICE,\n      style: {\n        fill: '#808080',\n        textAlign: 'start',\n        textBaseline: 'bottom',\n        fontSize: 10,\n        fontWeight: 'bold'\n      },\n      offsetX: 2\n    });\n    chart.guide().rect({\n      start: [ '0%', '0%' ],\n      end: [ '100%', '100%' ],\n      style: {\n        stroke: '#ddd',\n        lineWidth: 1,\n        fill: '#fff',\n        opacity: 1,\n        fillOpacity: 0\n      }\n    });\n    chart.schema()\n      .position('time*range')\n      .color('trend', function(trend) {\n        return [ '#F4333C', '#1CA93D' ][trend];\n      })\n      .shape('candle');\n    chart.render();\n  });\n","babeledSource":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@antv/f2\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@antv/f2\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.f2);\n    global.basic = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_f) {\n  \"use strict\";\n\n  _f = _interopRequireDefault(_f);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  fetch('../data/candle-sticks.json').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    data = data.slice(0, 150); // 截取数据，只展示 200 条\n\n    var BASIC_PRICE = 6.95; // 数据处理，按照时间排序\n\n    data.sort(function (obj1, obj2) {\n      return obj1.time > obj2.time ? 1 : -1;\n    });\n    data.forEach(function (obj) {\n      obj.range = [obj.start, obj.end, obj.max, obj.min];\n      obj.trend = obj.start <= obj.end ? 0 : 1;\n    });\n    var chart = new _f.default.Chart({\n      id: 'container',\n      pixelRatio: window.devicePixelRatio\n    });\n    chart.source(data, {\n      range: {\n        tickCount: 5,\n        formatter: function formatter(val) {\n          return val.toFixed(2);\n        }\n      },\n      time: {\n        tickCount: 3\n      }\n    });\n    chart.tooltip({\n      showCrosshairs: true,\n      showXTip: true,\n      showYTip: true,\n      crosshairsType: 'xy',\n      custom: true,\n      yTip: function yTip(val) {\n        return {\n          text: val.toFixed(2),\n          fill: '#333',\n          fontSize: 10\n        };\n      },\n      xTip: {\n        fill: '#333',\n        fontSize: 10\n      },\n      xTipBackground: {\n        fill: '#EDF2FE'\n      },\n      yTipBackground: {\n        fill: '#EDF2FE'\n      },\n      crosshairsStyle: {\n        stroke: '#0F8DE8'\n      },\n      onChange: function onChange(obj) {\n        var data = obj.items[0].origin;\n        $('#tooltip .item-value').each(function (index, ele) {\n          var type = $(ele).data('type');\n          var value = data[type];\n          var color;\n\n          if (type === 'time') {\n            color = '#000000';\n          } else {\n            color = data.trend === 0 ? '#F4333C' : '#1CA93D';\n          }\n\n          $(ele).css({\n            color: color\n          });\n          $(ele).text(value);\n        });\n        $('#tooltip').css('visibility', 'visible');\n      },\n      onHide: function onHide() {\n        $('#tooltip').css('visibility', 'hidden');\n      }\n    });\n    chart.axis('range', {\n      grid: {\n        stroke: '#ddd',\n        lineWidth: 1,\n        lineDash: null\n      },\n      label: {\n        fill: '#999'\n      }\n    });\n    chart.axis('time', {\n      label: function label(text, index, total) {\n        var textCfg = {\n          fill: '#999'\n        };\n\n        if (index === 0) {\n          textCfg.textAlign = 'left';\n        }\n\n        if (index === total - 1) {\n          textCfg.textAlign = 'right';\n        }\n\n        return textCfg;\n      },\n      grid: {\n        lineWidth: 1,\n        stroke: '#ddd'\n      }\n    });\n    chart.guide().line({\n      start: ['min', BASIC_PRICE],\n      end: ['max', BASIC_PRICE],\n      style: {\n        lineDash: [8],\n        stroke: '#F68300'\n      }\n    });\n    chart.guide().text({\n      position: ['min', BASIC_PRICE],\n      content: BASIC_PRICE,\n      style: {\n        fill: '#808080',\n        textAlign: 'start',\n        textBaseline: 'bottom',\n        fontSize: 10,\n        fontWeight: 'bold'\n      },\n      offsetX: 2\n    });\n    chart.guide().rect({\n      start: ['0%', '0%'],\n      end: ['100%', '100%'],\n      style: {\n        stroke: '#ddd',\n        lineWidth: 1,\n        fill: '#fff',\n        opacity: 1,\n        fillOpacity: 0\n      }\n    });\n    chart.schema().position('time*range').color('trend', function (trend) {\n      return ['#F4333C', '#1CA93D'][trend];\n    }).shape('candle');\n    chart.render();\n  });\n});"},{"relativePath":"candlestick/basic/demo/daily.js","absolutePath":"/Users/yue/gitlab/antvis/f2/examples/candlestick/basic/demo/daily.js","order":1,"filename":"daily.js","title":"日 K","screenshot":"https://gw.alipayobjects.com/zos/rmsportal/jqdTOsNQxXieHieJNtcJ.gif","source":"import F2 from '@antv/f2';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .candlestick-daily .chart-wrapper {\n    background-color: #101419;\n  }\n  .candlestick-daily .chart-container {\n    position: relative;\n  }\n  .candlestick-daily .chart-title {\n    width: 100%;\n    height: 20px;\n    line-height: 20px;\n    padding-left: 10px;\n    color: #676C79;\n    font-size: 12px;\n    font-weight: bold;\n    border-bottom: 1px solid #191E26;\n  }\n  .candlestick-daily canvas#chart {\n    height: 212px;\n    border-bottom: 1px solid #191E26;\n    margin-top: 16px;\n  }\n  .candlestick-daily canvas#volumn {\n    height: 50px;\n    border-bottom: 1px solid #191E26;\n  }\n  .candlestick-daily .tooltip-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: space-between;\n    visibility: hidden;\n    padding: 0 10px;\n    border-bottom: 1px solid #191E26;\n    background-color: #101419;\n  }\n  .candlestick-daily .tooltip-wrapper .tooltip-item {\n    width: 15%;\n    height: 16px;\n    line-height: 16px;\n    vertical-align: middle;\n  }\n  .candlestick-daily .tooltip-wrapper .tooltip-item.last {\n    width: 40%;\n  }\n  .candlestick-daily .tooltip-wrapper .tooltip-item span {\n    display: inline;\n    color: #899198;\n    font-size: 12px;\n  }\n  .candlestick-daily .tooltip-wrapper .tooltip-item span.item-value {\n    font-weight: bold;\n  }\n  .candlestick-daily #barTooltip .tooltip-item {\n    width: 100%;\n  }\n  .candlestick-daily .ma-wrapper {\n    position: absolute;\n    top: 20px;\n    visibility: hidden;\n    width: 100%;\n    height: 16px;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    padding: 0 10px 0 8px;\n    border-bottom: 1px solid #191E26;\n    background-color: #101419;\n  }\n  .candlestick-daily .ma-wrapper .tooltip-item {\n    width: auto;\n    height: 16px;\n    line-height: 16px;\n    vertical-align: middle;\n    font-size: 10px;\n    transform: scale(0.83);\n  }\n  .candlestick-daily .ma-wrapper .tooltip-item.first {\n    width: 7%;\n  }\n  .candlestick-daily .ma-wrapper .tooltip-item.first span {\n    background: #676C79;\n    padding: 0 4px;\n  }\n  .candlestick-daily .ma-wrapper .tooltip-item span {\n    display: inline;\n    color: #899198;\n  }\n`);\n\n$('#container').before(`\n<div class=\"candlestick-daily\">\n  <div class=\"chart-wrapper\">\n    <div class=\"chart-container\">\n      <div class=\"chart-title\">日 K</div>\n      <div class=\"tooltip-wrapper\" id=\"kTooltip\">\n        <div class=\"tooltip-item\">\n          <span>开</span>\n          <span class=\"item-value\" data-type=\"start\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span>收</span>\n          <span class=\"item-value\" data-type=\"end\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span>高</span>\n          <span class=\"item-value\" data-type=\"high\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span>低</span>\n          <span class=\"item-value\" data-type=\"low\"></span>\n        </div>\n        <div class=\"tooltip-item last\">\n          <span>成交</span>\n          <span class=\"item-value\" data-type=\"volumn\"></span>\n        </div>\n      </div>\n      <div class=\"ma-wrapper\" id=\"ma\">\n        <div class=\"tooltip-item first\">\n          <span>MA</span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span style=\"color:#C6268B;\">5:</span>\n          <span class=\"item-value\" data-type=\"MA5\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span style=\"color:#D7A429;\">10:</span>\n          <span class=\"item-value\" data-type=\"MA10\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span style=\"color: #227BAF;\">20:</span>\n          <span class=\"item-value\" data-type=\"MA20\"></span>\n        </div>\n        <div class=\"tooltip-item\">\n          <span style=\"color:#6960C4;\">30:</span>\n          <span class=\"item-value\" data-type=\"MA30\"></span>\n        </div>\n      </div>\n      <canvas id=\"chart\"></canvas>\n    </div>\n    <div class=\"chart-container\">\n      <div class=\"chart-title\">成交量</div>\n      <div class=\"tooltip-wrapper\" id=\"barTooltip\">\n        <div class=\"tooltip-item\">\n          <span>成交量:</span>\n          <span class=\"item-value\" data-type=\"volumn\"></span>\n        </div>\n      </div>\n      <canvas id=\"volumn\"></canvas>\n    </div>\n  </div>\n</div>\n`);\n\nconst COLOR_MAP = [ '#FF4433', '#32A532' ]; // 涨跌\nlet barChart;\nlet kChart;\nfunction updateMATip(data, index) {\n  const currItem = data[index];\n  $('#ma .item-value').each((index, ele) => {\n    const type = $(ele).data('type');\n    const value = currItem[type];\n    $(ele).text(value);\n  });\n  $('#ma').css('visibility', 'visible');\n}\n\nfetch('../data/1d-k.json')\n  .then(res => res.json())\n  .then(data => {\n    // 构造数据结构\n    const reportDates = [];\n    data.forEach(function(obj) {\n      reportDates.push(obj.reportDate);\n      obj.range = [ obj.start, obj.end, obj.high, obj.low ];\n      obj.trend = (obj.start <= obj.end) ? 0 : 1; // 0 表示涨，1 表示跌\n    });\n    const firstShowDates = reportDates.slice(75); // 首屏展示的日期\n    // 绘制 K 线图\n    kChart = drawKChart(data, firstShowDates, reportDates);\n    // 绘制成交量柱状图\n    barChart = drawBarChart(data, firstShowDates);\n  });\n\n// 绘制成交量柱状图\nfunction drawBarChart(data, firstShowDates) {\n  const chart = new F2.Chart({\n    id: 'volumn',\n    padding: [ 0, 0, 6 ],\n    pixelRatio: window.devicePixelRatio\n  });\n  chart.source(data, {\n    reportDate: {\n      type: 'timeCat',\n      values: firstShowDates\n    }\n  });\n  chart.axis(false);\n  chart.tooltip({\n    alwaysShow: true,\n    showCrosshairs: true,\n    crosshairsStyle: {\n      stroke: '#D1D3D4',\n      lineWidth: 1\n    },\n    showTooltipMarker: false,\n    custom: true,\n    onChange(obj) {\n      const currentPoint = {\n        x: obj.x,\n        y: obj.y\n      };\n      kChart.showTooltip(currentPoint);\n      const data = obj.items[0].origin;\n      $('#barTooltip .item-value').each((index, ele) => {\n        const type = $(ele).data('type');\n        const value = data[type];\n        $(ele).css({ color: '#FFFFFF' });\n        $(ele).text(value);\n      });\n      $('#barTooltip').css('visibility', 'visible');\n    },\n    onHide() {\n      $('#barTooltip').css('visibility', 'hidden');\n    }\n  });\n  chart.interval().position('reportDate*volumn')\n    .color('trend', val => {\n      return COLOR_MAP[val];\n    });\n  chart.interaction('pinch', {\n    maxScale: 25,\n    onProcess() {\n      if (this.pressed) return;\n      const currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n      kChart.scale('reportDate', {\n        type: 'timeCat',\n        values: currentValues,\n        ticks: [ '2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01' ]\n      });\n      kChart.repaint();\n    },\n    onEnd() {\n      kChart.hideTooltip();\n      chart.hideTooltip();\n    }\n  });\n  chart.interaction('pan', {\n    onProcess() {\n      if (this.pressed) return;\n      const currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n      kChart.scale('reportDate', {\n        type: 'timeCat',\n        values: currentValues,\n        ticks: [ '2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01' ]\n      });\n      kChart.repaint();\n    },\n    onEnd() {\n      kChart.hideTooltip();\n      chart.hideTooltip();\n    }\n  });\n  // 添加进度条\n  chart.scrollBar({\n    mode: 'x',\n    xStyle: {\n      backgroundColor: 'rgba(202, 215, 239, .2)',\n      fillerColor: '#818991',\n      size: 4,\n      lineCap: 'square',\n      offsetX: 0,\n      offsetY: 1\n    }\n  });\n  chart.render();\n  return chart;\n}\n\nfunction drawKChart(data, firstShowDates, allDates) {\n  const chart = new F2.Chart({\n    id: 'chart',\n    padding: [ 0, 0, 18 ],\n    pixelRatio: window.devicePixelRatio,\n    syncY: true\n  });\n  chart.source(data, {\n    reportDate: {\n      type: 'timeCat',\n      ticks: [ '2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01' ],\n      values: firstShowDates\n    }\n  });\n  chart.axis('reportDate', {\n    labelOffset: 1,\n    label(text, index, total) {\n      let textAlign = 'center';\n      if (index === 0) {\n        textAlign = 'start';\n      } else if (index === total - 1) {\n        textAlign = 'end';\n      }\n      return {\n        text: text.slice(0, 7),\n        fill: '#818991',\n        textAlign\n      };\n    },\n    line: {\n      stroke: '#181D26'\n    },\n    grid: {\n      lineWidth: 1,\n      stroke: '#181D26'\n    }\n  });\n  chart.axis('range', {\n    line: {\n      stroke: '#181D26'\n    },\n    grid: {\n      stroke: '#181D26'\n    },\n    labelOffset: -2,\n    label(text, index, total) {\n      const cfg = {\n        textAlign: 'start',\n        text: parseFloat(text).toFixed(2),\n        fill: '#818991'\n      };\n      if (index === 0) {\n        cfg.textBaseline = 'bottom';\n      } else if (index === (total - 1)) {\n        cfg.textBaseline = 'top';\n      }\n      return cfg;\n    }\n  });\n  chart.axis('MA5', false);\n  chart.axis('MA10', false);\n  chart.axis('MA20', false);\n  chart.axis('MA30', false);\n  chart.tooltip({\n    showTooltipMarker: false,\n    alwaysShow: true,\n    showCrosshairs: true,\n    crosshairsType: 'xy',\n    showXTip: true,\n    showYTip: true,\n    crosshairsStyle: {\n      stroke: '#D1D3D4',\n      lineWidth: 1\n    },\n    xTip: {\n      fill: '#80888F',\n      fontSize: 10\n    },\n    yTip(val) {\n      return {\n        fill: '#80888F',\n        fontSize: 10,\n        text: val.toFixed(3)\n      };\n    },\n    xTipBackground: {\n      fill: '#232C39',\n      fillOpacity: 0.75,\n      radius: 2\n    },\n    yTipBackground: {\n      fill: '#232C39',\n      fillOpacity: 0.75,\n      radius: 2\n    },\n    custom: true,\n    onChange(obj) {\n      const currentPoint = {\n        x: obj.x,\n        y: obj.y\n      };\n      barChart.showTooltip(currentPoint);\n      const currData = obj.items[0].origin;\n      $('#kTooltip .item-value').each((index, ele) => {\n        const type = $(ele).data('type');\n        const value = currData[type];\n        let color;\n        if (type === 'volumn') {\n          color = '#FFF';\n        } else {\n          color = currData.trend === 0 ? COLOR_MAP[0] : COLOR_MAP[1];\n        }\n        $(ele).css({ color });\n        $(ele).text(value);\n      });\n      $('#kTooltip').css('visibility', 'visible');\n      updateMATip(data, allDates.indexOf(currData.reportDate));\n    },\n    onHide() {\n      $('#kTooltip').css('visibility', 'hidden');\n      $('#ma').css('visibility', 'hidden');\n    }\n  });\n  chart.schema().position('reportDate*range')\n    .color('trend', val => {\n      return COLOR_MAP[val];\n    })\n    .shape('candle');\n  chart.line()\n    .position('reportDate*MA5')\n    .color('#C6268B')\n    .size(1)\n    .animate(false);\n  chart.line()\n    .position('reportDate*MA10')\n    .color('#D7A429')\n    .size(1)\n    .animate(false);\n  chart.line()\n    .position('reportDate*MA20')\n    .color('#227BAF')\n    .size(1)\n    .animate(false);\n  chart.line()\n    .position('reportDate*MA30')\n    .color('#6960C4')\n    .size(1)\n    .animate(false);\n  chart.interaction('pinch', {\n    maxScale: 25,\n    onProcess() {\n      if (this.pressed) return;\n      const currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n      barChart.scale('reportDate', {\n        type: 'timeCat',\n        values: currentValues\n      });\n      barChart.repaint();\n    },\n    onEnd() {\n      barChart.hideTooltip();\n      chart.hideTooltip();\n    }\n  });\n  chart.interaction('pan', {\n    onProcess() {\n      if (this.pressed) return; // TODO, 这个标识位好恶心\n      const currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n      barChart.scale('reportDate', {\n        type: 'timeCat',\n        values: currentValues\n      });\n      barChart.repaint();\n    },\n    onEnd() {\n      barChart.hideTooltip();\n      chart.hideTooltip();\n    }\n  });\n  chart.render();\n  return chart;\n}\n","babeledSource":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@antv/f2\", \"insert-css\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@antv/f2\"), require(\"insert-css\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.f2, global.insertCss);\n    global.daily = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_f, _insertCss) {\n  \"use strict\";\n\n  _f = _interopRequireDefault(_f);\n  _insertCss = _interopRequireDefault(_insertCss);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  (0, _insertCss.default)(\"\\n  .candlestick-daily .chart-wrapper {\\n    background-color: #101419;\\n  }\\n  .candlestick-daily .chart-container {\\n    position: relative;\\n  }\\n  .candlestick-daily .chart-title {\\n    width: 100%;\\n    height: 20px;\\n    line-height: 20px;\\n    padding-left: 10px;\\n    color: #676C79;\\n    font-size: 12px;\\n    font-weight: bold;\\n    border-bottom: 1px solid #191E26;\\n  }\\n  .candlestick-daily canvas#chart {\\n    height: 212px;\\n    border-bottom: 1px solid #191E26;\\n    margin-top: 16px;\\n  }\\n  .candlestick-daily canvas#volumn {\\n    height: 50px;\\n    border-bottom: 1px solid #191E26;\\n  }\\n  .candlestick-daily .tooltip-wrapper {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 20px;\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-content: space-between;\\n    visibility: hidden;\\n    padding: 0 10px;\\n    border-bottom: 1px solid #191E26;\\n    background-color: #101419;\\n  }\\n  .candlestick-daily .tooltip-wrapper .tooltip-item {\\n    width: 15%;\\n    height: 16px;\\n    line-height: 16px;\\n    vertical-align: middle;\\n  }\\n  .candlestick-daily .tooltip-wrapper .tooltip-item.last {\\n    width: 40%;\\n  }\\n  .candlestick-daily .tooltip-wrapper .tooltip-item span {\\n    display: inline;\\n    color: #899198;\\n    font-size: 12px;\\n  }\\n  .candlestick-daily .tooltip-wrapper .tooltip-item span.item-value {\\n    font-weight: bold;\\n  }\\n  .candlestick-daily #barTooltip .tooltip-item {\\n    width: 100%;\\n  }\\n  .candlestick-daily .ma-wrapper {\\n    position: absolute;\\n    top: 20px;\\n    visibility: hidden;\\n    width: 100%;\\n    height: 16px;\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-content: flex-start;\\n    padding: 0 10px 0 8px;\\n    border-bottom: 1px solid #191E26;\\n    background-color: #101419;\\n  }\\n  .candlestick-daily .ma-wrapper .tooltip-item {\\n    width: auto;\\n    height: 16px;\\n    line-height: 16px;\\n    vertical-align: middle;\\n    font-size: 10px;\\n    transform: scale(0.83);\\n  }\\n  .candlestick-daily .ma-wrapper .tooltip-item.first {\\n    width: 7%;\\n  }\\n  .candlestick-daily .ma-wrapper .tooltip-item.first span {\\n    background: #676C79;\\n    padding: 0 4px;\\n  }\\n  .candlestick-daily .ma-wrapper .tooltip-item span {\\n    display: inline;\\n    color: #899198;\\n  }\\n\");\n  $('#container').before(\"\\n<div class=\\\"candlestick-daily\\\">\\n  <div class=\\\"chart-wrapper\\\">\\n    <div class=\\\"chart-container\\\">\\n      <div class=\\\"chart-title\\\">\\u65E5 K</div>\\n      <div class=\\\"tooltip-wrapper\\\" id=\\\"kTooltip\\\">\\n        <div class=\\\"tooltip-item\\\">\\n          <span>\\u5F00</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"start\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span>\\u6536</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"end\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span>\\u9AD8</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"high\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span>\\u4F4E</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"low\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item last\\\">\\n          <span>\\u6210\\u4EA4</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"volumn\\\"></span>\\n        </div>\\n      </div>\\n      <div class=\\\"ma-wrapper\\\" id=\\\"ma\\\">\\n        <div class=\\\"tooltip-item first\\\">\\n          <span>MA</span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span style=\\\"color:#C6268B;\\\">5:</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"MA5\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span style=\\\"color:#D7A429;\\\">10:</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"MA10\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span style=\\\"color: #227BAF;\\\">20:</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"MA20\\\"></span>\\n        </div>\\n        <div class=\\\"tooltip-item\\\">\\n          <span style=\\\"color:#6960C4;\\\">30:</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"MA30\\\"></span>\\n        </div>\\n      </div>\\n      <canvas id=\\\"chart\\\"></canvas>\\n    </div>\\n    <div class=\\\"chart-container\\\">\\n      <div class=\\\"chart-title\\\">\\u6210\\u4EA4\\u91CF</div>\\n      <div class=\\\"tooltip-wrapper\\\" id=\\\"barTooltip\\\">\\n        <div class=\\\"tooltip-item\\\">\\n          <span>\\u6210\\u4EA4\\u91CF:</span>\\n          <span class=\\\"item-value\\\" data-type=\\\"volumn\\\"></span>\\n        </div>\\n      </div>\\n      <canvas id=\\\"volumn\\\"></canvas>\\n    </div>\\n  </div>\\n</div>\\n\");\n  var COLOR_MAP = ['#FF4433', '#32A532']; // 涨跌\n\n  var barChart;\n  var kChart;\n\n  function updateMATip(data, index) {\n    var currItem = data[index];\n    $('#ma .item-value').each(function (index, ele) {\n      var type = $(ele).data('type');\n      var value = currItem[type];\n      $(ele).text(value);\n    });\n    $('#ma').css('visibility', 'visible');\n  }\n\n  fetch('../data/1d-k.json').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    // 构造数据结构\n    var reportDates = [];\n    data.forEach(function (obj) {\n      reportDates.push(obj.reportDate);\n      obj.range = [obj.start, obj.end, obj.high, obj.low];\n      obj.trend = obj.start <= obj.end ? 0 : 1; // 0 表示涨，1 表示跌\n    });\n    var firstShowDates = reportDates.slice(75); // 首屏展示的日期\n    // 绘制 K 线图\n\n    kChart = drawKChart(data, firstShowDates, reportDates); // 绘制成交量柱状图\n\n    barChart = drawBarChart(data, firstShowDates);\n  }); // 绘制成交量柱状图\n\n  function drawBarChart(data, firstShowDates) {\n    var chart = new _f.default.Chart({\n      id: 'volumn',\n      padding: [0, 0, 6],\n      pixelRatio: window.devicePixelRatio\n    });\n    chart.source(data, {\n      reportDate: {\n        type: 'timeCat',\n        values: firstShowDates\n      }\n    });\n    chart.axis(false);\n    chart.tooltip({\n      alwaysShow: true,\n      showCrosshairs: true,\n      crosshairsStyle: {\n        stroke: '#D1D3D4',\n        lineWidth: 1\n      },\n      showTooltipMarker: false,\n      custom: true,\n      onChange: function onChange(obj) {\n        var currentPoint = {\n          x: obj.x,\n          y: obj.y\n        };\n        kChart.showTooltip(currentPoint);\n        var data = obj.items[0].origin;\n        $('#barTooltip .item-value').each(function (index, ele) {\n          var type = $(ele).data('type');\n          var value = data[type];\n          $(ele).css({\n            color: '#FFFFFF'\n          });\n          $(ele).text(value);\n        });\n        $('#barTooltip').css('visibility', 'visible');\n      },\n      onHide: function onHide() {\n        $('#barTooltip').css('visibility', 'hidden');\n      }\n    });\n    chart.interval().position('reportDate*volumn').color('trend', function (val) {\n      return COLOR_MAP[val];\n    });\n    chart.interaction('pinch', {\n      maxScale: 25,\n      onProcess: function onProcess() {\n        if (this.pressed) return;\n        var currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n\n        kChart.scale('reportDate', {\n          type: 'timeCat',\n          values: currentValues,\n          ticks: ['2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01']\n        });\n        kChart.repaint();\n      },\n      onEnd: function onEnd() {\n        kChart.hideTooltip();\n        chart.hideTooltip();\n      }\n    });\n    chart.interaction('pan', {\n      onProcess: function onProcess() {\n        if (this.pressed) return;\n        var currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n\n        kChart.scale('reportDate', {\n          type: 'timeCat',\n          values: currentValues,\n          ticks: ['2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01']\n        });\n        kChart.repaint();\n      },\n      onEnd: function onEnd() {\n        kChart.hideTooltip();\n        chart.hideTooltip();\n      }\n    }); // 添加进度条\n\n    chart.scrollBar({\n      mode: 'x',\n      xStyle: {\n        backgroundColor: 'rgba(202, 215, 239, .2)',\n        fillerColor: '#818991',\n        size: 4,\n        lineCap: 'square',\n        offsetX: 0,\n        offsetY: 1\n      }\n    });\n    chart.render();\n    return chart;\n  }\n\n  function drawKChart(data, firstShowDates, allDates) {\n    var chart = new _f.default.Chart({\n      id: 'chart',\n      padding: [0, 0, 18],\n      pixelRatio: window.devicePixelRatio,\n      syncY: true\n    });\n    chart.source(data, {\n      reportDate: {\n        type: 'timeCat',\n        ticks: ['2018-06-08', '2018-07-02', '2018-08-01', '2018-09-03', '2018-10-08', '2018-11-01'],\n        values: firstShowDates\n      }\n    });\n    chart.axis('reportDate', {\n      labelOffset: 1,\n      label: function label(text, index, total) {\n        var textAlign = 'center';\n\n        if (index === 0) {\n          textAlign = 'start';\n        } else if (index === total - 1) {\n          textAlign = 'end';\n        }\n\n        return {\n          text: text.slice(0, 7),\n          fill: '#818991',\n          textAlign: textAlign\n        };\n      },\n      line: {\n        stroke: '#181D26'\n      },\n      grid: {\n        lineWidth: 1,\n        stroke: '#181D26'\n      }\n    });\n    chart.axis('range', {\n      line: {\n        stroke: '#181D26'\n      },\n      grid: {\n        stroke: '#181D26'\n      },\n      labelOffset: -2,\n      label: function label(text, index, total) {\n        var cfg = {\n          textAlign: 'start',\n          text: parseFloat(text).toFixed(2),\n          fill: '#818991'\n        };\n\n        if (index === 0) {\n          cfg.textBaseline = 'bottom';\n        } else if (index === total - 1) {\n          cfg.textBaseline = 'top';\n        }\n\n        return cfg;\n      }\n    });\n    chart.axis('MA5', false);\n    chart.axis('MA10', false);\n    chart.axis('MA20', false);\n    chart.axis('MA30', false);\n    chart.tooltip({\n      showTooltipMarker: false,\n      alwaysShow: true,\n      showCrosshairs: true,\n      crosshairsType: 'xy',\n      showXTip: true,\n      showYTip: true,\n      crosshairsStyle: {\n        stroke: '#D1D3D4',\n        lineWidth: 1\n      },\n      xTip: {\n        fill: '#80888F',\n        fontSize: 10\n      },\n      yTip: function yTip(val) {\n        return {\n          fill: '#80888F',\n          fontSize: 10,\n          text: val.toFixed(3)\n        };\n      },\n      xTipBackground: {\n        fill: '#232C39',\n        fillOpacity: 0.75,\n        radius: 2\n      },\n      yTipBackground: {\n        fill: '#232C39',\n        fillOpacity: 0.75,\n        radius: 2\n      },\n      custom: true,\n      onChange: function onChange(obj) {\n        var currentPoint = {\n          x: obj.x,\n          y: obj.y\n        };\n        barChart.showTooltip(currentPoint);\n        var currData = obj.items[0].origin;\n        $('#kTooltip .item-value').each(function (index, ele) {\n          var type = $(ele).data('type');\n          var value = currData[type];\n          var color;\n\n          if (type === 'volumn') {\n            color = '#FFF';\n          } else {\n            color = currData.trend === 0 ? COLOR_MAP[0] : COLOR_MAP[1];\n          }\n\n          $(ele).css({\n            color: color\n          });\n          $(ele).text(value);\n        });\n        $('#kTooltip').css('visibility', 'visible');\n        updateMATip(data, allDates.indexOf(currData.reportDate));\n      },\n      onHide: function onHide() {\n        $('#kTooltip').css('visibility', 'hidden');\n        $('#ma').css('visibility', 'hidden');\n      }\n    });\n    chart.schema().position('reportDate*range').color('trend', function (val) {\n      return COLOR_MAP[val];\n    }).shape('candle');\n    chart.line().position('reportDate*MA5').color('#C6268B').size(1).animate(false);\n    chart.line().position('reportDate*MA10').color('#D7A429').size(1).animate(false);\n    chart.line().position('reportDate*MA20').color('#227BAF').size(1).animate(false);\n    chart.line().position('reportDate*MA30').color('#6960C4').size(1).animate(false);\n    chart.interaction('pinch', {\n      maxScale: 25,\n      onProcess: function onProcess() {\n        if (this.pressed) return;\n        var currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n\n        barChart.scale('reportDate', {\n          type: 'timeCat',\n          values: currentValues\n        });\n        barChart.repaint();\n      },\n      onEnd: function onEnd() {\n        barChart.hideTooltip();\n        chart.hideTooltip();\n      }\n    });\n    chart.interaction('pan', {\n      onProcess: function onProcess() {\n        if (this.pressed) return; // TODO, 这个标识位好恶心\n\n        var currentValues = chart.getXScale().values; // 获取平移后的当前展示 values\n\n        barChart.scale('reportDate', {\n          type: 'timeCat',\n          values: currentValues\n        });\n        barChart.repaint();\n      },\n      onEnd: function onEnd() {\n        barChart.hideTooltip();\n        chart.hideTooltip();\n      }\n    });\n    chart.render();\n    return chart;\n  }\n});"},{"relativePath":"candlestick/basic/demo/hour.js","absolutePath":"/Users/yue/gitlab/antvis/f2/examples/candlestick/basic/demo/hour.js","order":2,"filename":"hour.js","title":"分时","screenshot":"https://gw.alipayobjects.com/zos/rmsportal/lyOtxZlyFOKWPRwXLwNU.png","source":"import F2 from '@antv/f2';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .chart-wrapper {\n    background-color: #101419;\n  }\n  .chart-container {\n    position: relative;\n  }\n  .chart-title {\n    width: 100%;\n    height: 20px;\n    line-height: 20px;\n    padding-left: 10px;\n    color: #676C79;\n    font-size: 12px;\n    font-weight: bold;\n    border-bottom: 1px solid #191E26;\n  }\n  canvas#chart {\n    height: 212px;\n    border-bottom: 1px solid #191E26;\n  }\n  canvas#volumn {\n    height: 50px;\n    border-bottom: 1px solid #191E26;\n  }\n  .tooltip-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: space-between;\n    visibility: hidden;\n    padding: 0 10px;\n    border-bottom: 1px solid #191E26;\n    background-color: #101419;\n  }\n  .tooltip-item {\n    width: 21.25%;\n    height: 16px;\n    line-height: 16px;\n    vertical-align: middle;\n  }\n  .tooltip-item.first {\n    width: 15%;\n  }\n  .tooltip-item span {\n    display: inline;\n    color: #899198;\n    font-size: 12px;\n  }\n  .tooltip-item span {\n    font-weight: bold;\n  }\n`);\n\n$('#container').before(`\n<div class=\"chart-wrapper\">\n  <div class=\"chart-container\">\n    <div class=\"chart-title\">分时</div>\n    <div class=\"tooltip-wrapper\" id=\"tooltip\">\n      <div class=\"tooltip-item first\">\n        <span class=\"item-value\" data-type=\"time\"></span>\n      </div>\n      <div class=\"tooltip-item\">\n        <span>价</span>\n        <span class=\"item-value\" data-type=\"price\"></span>\n      </div>\n      <div class=\"tooltip-item\">\n        <span>幅</span>\n        <span class=\"item-value\" data-type=\"rate\"></span>\n      </div>\n      <div class=\"tooltip-item\">\n        <span>额</span>\n        <span class=\"item-value\" data-type=\"amount\"></span>\n      </div>\n      <div class=\"tooltip-item last\">\n        <span>量</span>\n        <span class=\"item-value\" data-type=\"volumn\"></span>\n      </div>\n    </div>\n    <canvas id=\"chart\"></canvas>\n  </div>\n  <div class=\"chart-container\">\n    <canvas id=\"volumn\"></canvas>\n  </div>\n</div>\n`);\n\nconst COLOR_MAP = [ '#FF4433', '#32A532' ]; // 涨跌\nconst BASIC_PRICE = 3.55;\nlet barChart;\nlet lineChart;\n\nfetch('../data/hour-k.json')\n  .then(res => res.json())\n  .then(data => {\n    const prices = [];\n    let lastVolumn = data[0].volumn;\n    // 构造数据结构\n    data.forEach(function(obj, index) {\n      obj.trend = (obj.price > BASIC_PRICE) ? 0 : 1; // 0 表示涨，1 表示跌\n      if (index > 0) {\n        obj.text = obj.volumn - lastVolumn;\n        lastVolumn = obj.volumn;\n      } else {\n        obj.text = obj.volumn;\n      }\n      prices.push(obj.price);\n    });\n    const maxPrice = Math.max.apply(null, prices);\n    const minPrice = (BASIC_PRICE - (maxPrice - BASIC_PRICE)).toFixed(2) * 1;\n    // 绘制分时折线图\n    lineChart = drawlineChart(data, maxPrice, minPrice);\n    // 绘制成交量柱状图\n    barChart = drawBarChart(data);\n  });\n\n// 绘制成交量柱状图\nfunction drawBarChart(data) {\n  const chart = new F2.Chart({\n    id: 'volumn',\n    padding: 0,\n    pixelRatio: window.devicePixelRatio\n  });\n  chart.source(data);\n  chart.axis(false);\n  chart.tooltip({\n    alwaysShow: true,\n    showCrosshairs: true,\n    crosshairsStyle: {\n      stroke: '#D1D3D4',\n      lineWidth: 1\n    },\n    showTooltipMarker: false,\n    custom: true,\n    onChange(obj) {\n      const currentPoint = {\n        x: obj.x,\n        y: obj.y\n      };\n      lineChart.showTooltip(currentPoint);\n    }\n  });\n  chart.interval().position('time*text')\n    .color('trend', val => {\n      return COLOR_MAP[val];\n    });\n  chart.render();\n  return chart;\n}\n\nfunction drawlineChart(data, max, min) {\n  const chart = new F2.Chart({\n    id: 'chart',\n    padding: [ 5, 0, 15 ],\n    pixelRatio: window.devicePixelRatio\n  });\n  chart.source(data, {\n    time: {\n      ticks: [ '09:30', '11:30', '15:00' ]\n    },\n    price: {\n      min,\n      max,\n      ticks: [ min, max ]\n    }\n  });\n  chart.axis('time', {\n    labelOffset: 1,\n    label(text, index, total) {\n      const cfg = {\n        fill: '#818991',\n        textAlign: 'center',\n        text\n      };\n      if (index === 0) {\n        cfg.textAlign = 'start';\n      } else if (index === total - 1) {\n        cfg.textAlign = 'end';\n      } else {\n        cfg.text += '/1300';\n      }\n      return cfg;\n    },\n    line: {\n      stroke: '#181D26'\n    },\n    grid: {\n      lineWidth: 1,\n      stroke: '#181D26'\n    }\n  });\n  chart.axis('price', {\n    line: {\n      stroke: '#181D26'\n    },\n    grid: {\n      stroke: '#181D26'\n    },\n    labelOffset: -2,\n    label(text, index, total) {\n      const cfg = {\n        textAlign: 'start',\n        text,\n        fill: '#818991'\n      };\n      if (index === 0) {\n        cfg.textBaseline = 'bottom';\n      } else if (index === (total - 1)) {\n        cfg.textBaseline = 'top';\n      }\n      return cfg;\n    }\n  });\n  chart.tooltip({\n    alwaysShow: true,\n    showCrosshairs: true,\n    crosshairsType: 'xy',\n    showYTip: true,\n    crosshairsStyle: {\n      stroke: '#D1D3D4',\n      lineWidth: 1\n    },\n    yTip(val) {\n      return {\n        fill: '#80888F',\n        fontSize: 10,\n        text: val.toFixed(2)\n      };\n    },\n    yTipBackground: {\n      fill: '#232C39',\n      fillOpacity: 0.95,\n      radius: 2,\n      stroke: '#252F3D'\n    },\n    custom: true,\n    onChange(obj) {\n      const currentPoint = {\n        x: obj.x,\n        y: obj.y\n      };\n      barChart.showTooltip(currentPoint);\n      const data = obj.items[0].origin;\n      $('#tooltip .item-value').each((index, ele) => {\n        const type = $(ele).data('type');\n        let value = data[type];\n        let color = data.trend === 0 ? COLOR_MAP[0] : COLOR_MAP[1];\n        if (type === 'volumn') {\n          color = '#FFF';\n          value = data.text + ' 手';\n        } else if (type === 'time') {\n          color = '#FFF';\n        } else if (type === 'rate') { // 涨跌幅度\n          value = (data.price - BASIC_PRICE) / BASIC_PRICE;\n          value = (value * 100).toFixed(2) + '%';\n        } else if (type === 'amount') {\n          value = (data.price - BASIC_PRICE).toFixed(2);\n        } else if (type === 'price') {\n          value = value.toFixed(2);\n        }\n        $(ele).css({ color });\n        $(ele).text(value);\n      });\n      $('#tooltip').css('visibility', 'visible');\n    },\n    onHide() {\n      $('#tooltip').css('visibility', 'hidden');\n    }\n  });\n  chart.guide().line({\n    start: [ 'min', BASIC_PRICE ],\n    end: [ 'max', BASIC_PRICE ],\n    style: {\n      lineDash: [ 8 ],\n      stroke: '#728B6E'\n    }\n  });\n  chart.guide().text({\n    position: [ 'min', BASIC_PRICE ],\n    content: BASIC_PRICE,\n    style: {\n      fill: '#878F92',\n      fontSize: 10,\n      fontWeight: 'bold',\n      textAlign: 'start',\n      textBaseline: 'bottom'\n    }\n  });\n  chart.line().position('time*price').color('#98BCDE');\n  chart.area().position('time*price').color('#98BCDE');\n  chart.render();\n  return chart;\n}\n","babeledSource":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@antv/f2\", \"insert-css\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@antv/f2\"), require(\"insert-css\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.f2, global.insertCss);\n    global.hour = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_f, _insertCss) {\n  \"use strict\";\n\n  _f = _interopRequireDefault(_f);\n  _insertCss = _interopRequireDefault(_insertCss);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  (0, _insertCss.default)(\"\\n  .chart-wrapper {\\n    background-color: #101419;\\n  }\\n  .chart-container {\\n    position: relative;\\n  }\\n  .chart-title {\\n    width: 100%;\\n    height: 20px;\\n    line-height: 20px;\\n    padding-left: 10px;\\n    color: #676C79;\\n    font-size: 12px;\\n    font-weight: bold;\\n    border-bottom: 1px solid #191E26;\\n  }\\n  canvas#chart {\\n    height: 212px;\\n    border-bottom: 1px solid #191E26;\\n  }\\n  canvas#volumn {\\n    height: 50px;\\n    border-bottom: 1px solid #191E26;\\n  }\\n  .tooltip-wrapper {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 20px;\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-content: space-between;\\n    visibility: hidden;\\n    padding: 0 10px;\\n    border-bottom: 1px solid #191E26;\\n    background-color: #101419;\\n  }\\n  .tooltip-item {\\n    width: 21.25%;\\n    height: 16px;\\n    line-height: 16px;\\n    vertical-align: middle;\\n  }\\n  .tooltip-item.first {\\n    width: 15%;\\n  }\\n  .tooltip-item span {\\n    display: inline;\\n    color: #899198;\\n    font-size: 12px;\\n  }\\n  .tooltip-item span {\\n    font-weight: bold;\\n  }\\n\");\n  $('#container').before(\"\\n<div class=\\\"chart-wrapper\\\">\\n  <div class=\\\"chart-container\\\">\\n    <div class=\\\"chart-title\\\">\\u5206\\u65F6</div>\\n    <div class=\\\"tooltip-wrapper\\\" id=\\\"tooltip\\\">\\n      <div class=\\\"tooltip-item first\\\">\\n        <span class=\\\"item-value\\\" data-type=\\\"time\\\"></span>\\n      </div>\\n      <div class=\\\"tooltip-item\\\">\\n        <span>\\u4EF7</span>\\n        <span class=\\\"item-value\\\" data-type=\\\"price\\\"></span>\\n      </div>\\n      <div class=\\\"tooltip-item\\\">\\n        <span>\\u5E45</span>\\n        <span class=\\\"item-value\\\" data-type=\\\"rate\\\"></span>\\n      </div>\\n      <div class=\\\"tooltip-item\\\">\\n        <span>\\u989D</span>\\n        <span class=\\\"item-value\\\" data-type=\\\"amount\\\"></span>\\n      </div>\\n      <div class=\\\"tooltip-item last\\\">\\n        <span>\\u91CF</span>\\n        <span class=\\\"item-value\\\" data-type=\\\"volumn\\\"></span>\\n      </div>\\n    </div>\\n    <canvas id=\\\"chart\\\"></canvas>\\n  </div>\\n  <div class=\\\"chart-container\\\">\\n    <canvas id=\\\"volumn\\\"></canvas>\\n  </div>\\n</div>\\n\");\n  var COLOR_MAP = ['#FF4433', '#32A532']; // 涨跌\n\n  var BASIC_PRICE = 3.55;\n  var barChart;\n  var lineChart;\n  fetch('../data/hour-k.json').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var prices = [];\n    var lastVolumn = data[0].volumn; // 构造数据结构\n\n    data.forEach(function (obj, index) {\n      obj.trend = obj.price > BASIC_PRICE ? 0 : 1; // 0 表示涨，1 表示跌\n\n      if (index > 0) {\n        obj.text = obj.volumn - lastVolumn;\n        lastVolumn = obj.volumn;\n      } else {\n        obj.text = obj.volumn;\n      }\n\n      prices.push(obj.price);\n    });\n    var maxPrice = Math.max.apply(null, prices);\n    var minPrice = (BASIC_PRICE - (maxPrice - BASIC_PRICE)).toFixed(2) * 1; // 绘制分时折线图\n\n    lineChart = drawlineChart(data, maxPrice, minPrice); // 绘制成交量柱状图\n\n    barChart = drawBarChart(data);\n  }); // 绘制成交量柱状图\n\n  function drawBarChart(data) {\n    var chart = new _f.default.Chart({\n      id: 'volumn',\n      padding: 0,\n      pixelRatio: window.devicePixelRatio\n    });\n    chart.source(data);\n    chart.axis(false);\n    chart.tooltip({\n      alwaysShow: true,\n      showCrosshairs: true,\n      crosshairsStyle: {\n        stroke: '#D1D3D4',\n        lineWidth: 1\n      },\n      showTooltipMarker: false,\n      custom: true,\n      onChange: function onChange(obj) {\n        var currentPoint = {\n          x: obj.x,\n          y: obj.y\n        };\n        lineChart.showTooltip(currentPoint);\n      }\n    });\n    chart.interval().position('time*text').color('trend', function (val) {\n      return COLOR_MAP[val];\n    });\n    chart.render();\n    return chart;\n  }\n\n  function drawlineChart(data, max, min) {\n    var chart = new _f.default.Chart({\n      id: 'chart',\n      padding: [5, 0, 15],\n      pixelRatio: window.devicePixelRatio\n    });\n    chart.source(data, {\n      time: {\n        ticks: ['09:30', '11:30', '15:00']\n      },\n      price: {\n        min: min,\n        max: max,\n        ticks: [min, max]\n      }\n    });\n    chart.axis('time', {\n      labelOffset: 1,\n      label: function label(text, index, total) {\n        var cfg = {\n          fill: '#818991',\n          textAlign: 'center',\n          text: text\n        };\n\n        if (index === 0) {\n          cfg.textAlign = 'start';\n        } else if (index === total - 1) {\n          cfg.textAlign = 'end';\n        } else {\n          cfg.text += '/1300';\n        }\n\n        return cfg;\n      },\n      line: {\n        stroke: '#181D26'\n      },\n      grid: {\n        lineWidth: 1,\n        stroke: '#181D26'\n      }\n    });\n    chart.axis('price', {\n      line: {\n        stroke: '#181D26'\n      },\n      grid: {\n        stroke: '#181D26'\n      },\n      labelOffset: -2,\n      label: function label(text, index, total) {\n        var cfg = {\n          textAlign: 'start',\n          text: text,\n          fill: '#818991'\n        };\n\n        if (index === 0) {\n          cfg.textBaseline = 'bottom';\n        } else if (index === total - 1) {\n          cfg.textBaseline = 'top';\n        }\n\n        return cfg;\n      }\n    });\n    chart.tooltip({\n      alwaysShow: true,\n      showCrosshairs: true,\n      crosshairsType: 'xy',\n      showYTip: true,\n      crosshairsStyle: {\n        stroke: '#D1D3D4',\n        lineWidth: 1\n      },\n      yTip: function yTip(val) {\n        return {\n          fill: '#80888F',\n          fontSize: 10,\n          text: val.toFixed(2)\n        };\n      },\n      yTipBackground: {\n        fill: '#232C39',\n        fillOpacity: 0.95,\n        radius: 2,\n        stroke: '#252F3D'\n      },\n      custom: true,\n      onChange: function onChange(obj) {\n        var currentPoint = {\n          x: obj.x,\n          y: obj.y\n        };\n        barChart.showTooltip(currentPoint);\n        var data = obj.items[0].origin;\n        $('#tooltip .item-value').each(function (index, ele) {\n          var type = $(ele).data('type');\n          var value = data[type];\n          var color = data.trend === 0 ? COLOR_MAP[0] : COLOR_MAP[1];\n\n          if (type === 'volumn') {\n            color = '#FFF';\n            value = data.text + ' 手';\n          } else if (type === 'time') {\n            color = '#FFF';\n          } else if (type === 'rate') {\n            // 涨跌幅度\n            value = (data.price - BASIC_PRICE) / BASIC_PRICE;\n            value = (value * 100).toFixed(2) + '%';\n          } else if (type === 'amount') {\n            value = (data.price - BASIC_PRICE).toFixed(2);\n          } else if (type === 'price') {\n            value = value.toFixed(2);\n          }\n\n          $(ele).css({\n            color: color\n          });\n          $(ele).text(value);\n        });\n        $('#tooltip').css('visibility', 'visible');\n      },\n      onHide: function onHide() {\n        $('#tooltip').css('visibility', 'hidden');\n      }\n    });\n    chart.guide().line({\n      start: ['min', BASIC_PRICE],\n      end: ['max', BASIC_PRICE],\n      style: {\n        lineDash: [8],\n        stroke: '#728B6E'\n      }\n    });\n    chart.guide().text({\n      position: ['min', BASIC_PRICE],\n      content: BASIC_PRICE,\n      style: {\n        fill: '#878F92',\n        fontSize: 10,\n        fontWeight: 'bold',\n        textAlign: 'start',\n        textBaseline: 'bottom'\n      }\n    });\n    chart.line().position('time*price').color('#98BCDE');\n    chart.area().position('time*price').color('#98BCDE');\n    chart.render();\n    return chart;\n  }\n});"}]}}}}